name: Development Checks
run-name: Dev checks on ${{ github.ref_name }}
on:
  push:
    paths:
      - app/**
    branches-ignore:
      - main
jobs:
  Run-Development-Checks:
    runs-on: ubuntu-latest
    steps:
    -
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    -
      name: "Set up Python to pinned version"
      uses: actions/setup-python@v5
      with:
        python-version-file: ".python-version"
    -
      name: Install 'uv'
      uses: astral-sh/setup-uv@v6
    -
      name: Install the project
      run: time uv sync --locked --all-extras --dev

    # ------------------ SAST Steps ------------------ #

    -
      name: Run Bandit SAST scan
      run: time uv run bandit -r ./app -f json -o bandit-report.json
    -
      name: Gitleaks secret scan
      uses: gitleaks/gitleaks-action@v2
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}